---
id: api
title: API
---

import { Form, FormItem } from '@rexd/xform';

{ğŸš€} è¡¨ç¤ºè¿›é˜¶ APIã€‚ æ‰€æœ‰ API éƒ½é€šè¿‡ `@rexd/xform` å¯¼å‡ºã€‚

## ç»„ä»¶

### `Form`

è¡¨å•ç»„ä»¶ï¼Œåˆ›å»ºæ‰€éœ€çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶é€šè¿‡ FormLayout æ¸²æŸ“ä¸€ä¸ª divï¼š

- FormEnvProviderï¼šè¡¨å•çš„ç¯å¢ƒå˜é‡ï¼Œå­ç»„ä»¶å¯ä»¥é€šè¿‡ [`useFormEnv`](#useformenv) è·å–è¿™äº›ç¯å¢ƒå˜é‡
- ModelProviderï¼šæ¨¡å‹å¯¹è±¡ï¼Œå­ç»„ä»¶å¯ä»¥é€šè¿‡ [`useModel`](#usemodel) è·å–æ¨¡å‹å¯¹è±¡
- FormLayoutï¼š è¡¨å•å¸ƒå±€

<PropsTable component={Form} />

:::note @alife/hippo-xform
æ³¨æ„å› ä¸ºåº•å±‚ç»„ä»¶åº“ä¸åŒï¼Œ@alife/hippo-xform æä¾›äº†ä¸åŒçš„ layout å‚æ•°ã€‚è¯¦è§ [hippo-xform](hippo-xform).
:::

### `FormItem`

è¡¨å•é¡¹ ç»„ä»¶ï¼Œæ¸²æŸ“ä¸€ä¸ª FormControlï¼ŒåŒ…å«é¡¹ç›®æ ‡ç­¾ï¼ˆlabelï¼‰ã€é”™è¯¯ä¿¡æ¯ã€å¯é€‰çš„å¸®åŠ©ä¿¡æ¯ï¼Œä»¥åŠå…·ä½“çš„æ§ä»¶å®ä¾‹ï¼ˆä¾‹å¦‚ä¸€ä¸ªè¾“å…¥æ¡†ï¼‰ã€‚

<PropsTable
  props={[
    { name: 'component', required: true, type: 'string', description: 'ç»„ä»¶ç±»å‹' },
    { name: 'name', required: false, type: 'string', description: 'å­—æ®µæ•°æ®ç´¢å¼•' },
    { name: 'field', required: false, type: 'Field', description: 'Field å¯¹è±¡ï¼Œæä¾›åå°†è¦†ç›– name å±æ€§' },
    { name: 'label', required: true, type: 'ReactNode', description: 'å­—æ®µçš„æ˜¾ç¤ºåç§°' },
    { name: 'tip', type: 'ReactNode', description: 'æç¤ºä¿¡æ¯' },
    { name: 'asterisk', type: 'boolean', description: 'æ˜¯å¦å±•ç¤ºã€Œ*ã€' },
    { name: 'help', type: 'ReactNode', description: 'å¸®åŠ©æ–‡æœ¬' },
    { name: 'fallbackValue', description: 'å­—æ®µå€¼ä¸ºç©ºæ—¶ï¼Œç»„ä»¶å±•ç¤ºç”¨çš„é»˜è®¤å€¼' },
    { name: 'componentProps', description: 'ç»„ä»¶çš„ props' },
    { category: 'æ ¡éªŒ', name: 'required', type: 'boolean', defaultValue: 'false', description: 'å­—æ®µæ˜¯å¦å¿…å¡«' },
    {
      category: 'æ ¡éªŒ',
      name: 'requiredMessage',
      type: 'string',
      defaultValue: '"è¯¥å­—æ®µä¸ºå¿…å¡«é¡¹"',
      description: 'å¿…å¡«å­—æ®µçš„é”™è¯¯ä¿¡æ¯',
    },
    {
      category: 'æ ¡éªŒ',
      name: 'validate',
      type: '(value: any, field: Field, trigger: FieldValidateTrigger) => string | Promise<string>',
      // </string> è¿™ä¸ªæ˜¯ä¸ºäº†è§£å†³ webstorm çš„æŠ¥é”™ (ï¿£ï¼“ï¿£)a
      description: 'æ ¡éªŒæ–¹æ³•ã€‚ è¿”å›å­—ç¬¦ä¸²è¡¨ç¤ºå­—æ®µä¸Šçš„å‡ºé”™ä¿¡æ¯',
    },
    {
      category: 'æ ¡éªŒ',
      name: 'validateOnMount',
      type: 'boolean',
      description: 'ç»„ä»¶åŠ è½½æ—¶æ˜¯å¦è§¦å‘æ ¡éªŒã€‚ FormEnvProvider å¯ä»¥æŒ‡å®šè¯¥ prop é»˜è®¤å€¼',
      defaultValue: 'false',
    },
    {
      category: 'æ ¡éªŒ',
      name: 'validateOnChange',
      type: 'boolean',
      description: 'å€¼ä¿®æ”¹æ—¶æ˜¯å¦è§¦å‘æ ¡éªŒã€‚ FormEnvProvider å¯ä»¥æŒ‡å®šè¯¥ prop é»˜è®¤å€¼',
      defaultValue: 'true',
    },
    {
      category: 'æ ¡éªŒ',
      name: 'validateOnBlur',
      type: 'boolean',
      description: 'ç»„ä»¶å¤±å»ç„¦ç‚¹æ—¶æ˜¯å¦è§¦å‘æ ¡éªŒã€‚ FormEnvProvider å¯ä»¥æŒ‡å®šè¯¥ prop é»˜è®¤å€¼',
      defaultValue: 'true',
    },
    { name: 'dataSource', description: 'åŒ componentProps.dataSource' },
    { name: 'disabled', description: 'åŒ componentProps.disabled' },
    { name: 'readOnly', description: 'åŒ componentProps.readOnly' },
    {
      name: 'status',
      description: (
        <>
          åŒ componentProps.status
          <br />
          é»˜è®¤ä¸º undefinedï¼›å­—æ®µæ ¡éªŒå‡ºé”™æ—¶ï¼Œstatus çš„é»˜è®¤å€¼ä¸º 'error'ï¼›
          <br /> <b>æ³¨æ„è¯¥ prop çš„åç§°ä¸å…·ä½“çš„ç»„ä»¶ç±»å‹ç›¸å…³ï¼Œä¾‹å¦‚åœ¨ @alife/hippo-xform ä¸­ï¼Œè¯¥ prop çš„åç§°ä¸º 'state'</b>
        </>
      ),
    },
    {
      category: '{ğŸš€}',
      name: 'value',
      description: (
        <>
          è¦†ç›–è¡¨å•é¡¹é»˜è®¤çš„ value
          <br />
          <b>æ³¨æ„è¯¥ prop çš„åç§°ä¸å…·ä½“çš„ç»„ä»¶ç±»å‹ç›¸å…³ï¼Œä¾‹å¦‚éƒ¨åˆ†ç»„ä»¶è¯¥ prop çš„åç§°ä¸º 'checked'</b>
        </>
      ),
    },
    { category: '{ğŸš€}', name: 'onChange', description: 'è¦†ç›–è¡¨å•é¡¹é»˜è®¤çš„ onChange' },
    { category: '{ğŸš€}', name: 'onBlur', description: 'è¦†ç›–è¡¨å•é¡¹é»˜è®¤çš„ onBlur' },
    { category: '{ğŸš€}', name: 'renderPreview', description: 'è¦†ç›–è¡¨å•é¡¹é»˜è®¤çš„ é¢„è§ˆæ€æ¸²æŸ“æ–¹æ³•' },
    {
      category: '{ğŸš€}',
      name: 'isEmpty',
      type: '(value: any) => boolean',
      description: 'è¦†ç›–è¡¨å•é¡¹é»˜è®¤çš„åˆ¤æ–­ä¸ºç©ºçš„é€»è¾‘',
    },
  ]}
/>

<details>
  <summary>component åˆ—è¡¨</summary>

```
"switch"
"checkbox"
"checkboxGroup"
"radioGroup"
"datePicker"
"dateRangePicker"
"timePicker"
"filePicker"
"mediaPicker"
"input"
"textarea"
"numberInput"
"range"
"select"
"singleSelect"
"multiSelect"
"treeSelect"
"singleTreeSelect"
"multiTreeSelect"
"testButtonGroup" (æµ‹è¯•ç”¨çš„æŒ‰é’®ç»„ï¼Œé€šè¿‡ componentProps.items=['A', 'B', 'C'] è®¾ç½®é€‰é¡¹)
```

</details>

:::info @alife/hippo-xform
æ³¨æ„ @alife/hippo-xform æä¾›äº†ä¸åŒçš„ç»„ä»¶ç±»å‹ï¼Œè¯¦è§ [hippo-xform](hippo-xform).
:::

### `Form.Submit`

è¡¨å•æäº¤[æŒ‰é’®](../button)ï¼Œç‚¹å‡»æ—¶...

- è§¦å‘æ‰€æœ‰å­—æ®µçš„æ ¡éªŒ
- å¦‚æœæ ¡éªŒé€šè¿‡ï¼Œåˆ™è°ƒç”¨ `onSubmit(submitValues, model)`
- å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™è°ƒç”¨ `onSubmit(erros, model)`

### `Form.Reset`

è¡¨å•é‡ç½®[æŒ‰é’®](../button)ï¼Œç‚¹å‡»æ—¶å°†æ¸…ç©º values ä¸æ ¡éªŒé”™è¯¯ï¼Œç„¶åè§¦å‘ `onReset`ã€‚

### `Form.Effect`

`<Form.Effect watch={watch} effect={effect} fireImmediately={boolean} />`

åˆ›å»ºè¡¨å•è”åŠ¨ï¼Œæ¯å½“ watch å¯¹åº”çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œeffect éƒ½ä¼šè¢«è§¦å‘ã€‚

effect è¢«è§¦å‘æ—¶ï¼Œå¯ä»¥è·å–åˆ°ä¸¤ä¸ªå‚æ•°ï¼š

- `value: any`: æ–°çš„å€¼
- `detail: object`
  - `detail.prev` æ—§çš„å€¼
  - `detail.model` å½“å‰æ¨¡å‹
  - `detail.next` æ–°çš„å€¼

watch æ”¯æŒä»¥ä¸‹ç”¨æ³•ï¼š

- `string` ç›‘å¬å¯¹åº”æ•°æ®ç´¢å¼•å¤„ value å˜åŒ–ï¼ˆæ³¨æ„åµŒå¥—å­—æ®µçš„å˜æ›´ä¹Ÿä¼šè§¦å‘ effectï¼‰
- [`Feild`](#field) ç›‘å¬å¯¹åº” Field çš„ value å˜åŒ–
- [`AsyncValue`](#asyncvalue) ç›‘å¬å¯¹åº” asyncValue.current çš„ value å˜åŒ–
- `Array<string | Field | AsyncValue>` ç›‘å¬å¤šä¸ªæ¥æºçš„å˜åŒ–
  - å…¶ä¸­ä¸€ä¸ªæ¥æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œeffect å°±ä¼šè¢«è°ƒç”¨ä¸€æ¬¡
  - effect è§¦å‘æ—¶ï¼Œæ‰€æœ‰æ¥æºçš„å€¼ä¼šæ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­
- `() => any` è‡ªå®šä¹‰å‡½æ•°ç”¨æ³•ï¼Œç”¨æ³•åŒ [mobx reaction](https://mobx.js.org/api.html#reaction) çš„ç¬¬ä¸€ä¸ªå‚æ•°

[fireImmediately](https://mobx.js.org/reactions.html#fireimmediately-_reaction_) ç”¨äºæŒ‡å®šæ˜¯å¦åœ¨é¦–æ¬¡åŠ è½½æ—¶è§¦å‘ effectï¼Œé»˜è®¤ä¸º false.

### `Form.Array`

[{ğŸš€} ç”¨æ³•](advanced#formarray)ã€‚ ä»¥å½“å‰ model ä¸ºåŸºç¡€ï¼Œä¸ºå…¶å­èŠ‚ç‚¹æä¾›ä¸€ä¸ªæ–°çš„ sub modelï¼Œå¹¶å°†å­èŠ‚ç‚¹ä¸­çš„è¡¨å•å€¼æ”¶é›†åˆ°å½“å‰ model ä¸­ `{name}.{itemIndex}` å¯¹åº”çš„ä½ç½®ã€‚

<PropsTable
  props={[
    { name: 'name', type: 'string', required: true, description: 'å­—æ®µç´¢å¼•' },
    {
      name: 'layout',
      type: '(input: XFormArrayLayoutInput) => React.ReactElement',
      required: true,
      description:
        'æ•°ç»„å¸ƒå±€ï¼Œæ§åˆ¶è¡¨å•å¦‚ä½•å¯¹æ•°ç»„è¿›è¡Œå¸ƒå±€ï¼ŒåŒ…æ‹¬æ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„å¸ƒå±€ ä»¥åŠ ç›¸å…³çš„æ“ä½œæŒ‰é’®ï¼ˆæ·»åŠ ã€åˆ é™¤ã€ä¸Šç§»ã€ä¸‹ç§»ç­‰ï¼‰',
    },
    {
      name: 'itemFactory',
      type: '(arrayModel: SubModel) => any',
      defaultValue: '() => ({})',
      description: 'æ•°ç»„ä¸­æ–°å¢å…ƒç´ çš„åˆå§‹å€¼, é»˜è®¤ä¸ºä¸€ä¸ªæ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡çš„å‡½æ•°',
    },
  ]}
/>

### `Form.Object`

[{ğŸš€} ç”¨æ³•](advanced#formobject)ã€‚ ä»¥å½“å‰ model ä¸ºåŸºç¡€ï¼Œä¸ºå…¶å­èŠ‚ç‚¹æä¾›ä¸€ä¸ªæ–°çš„ sub modelï¼Œå¹¶å°†å­èŠ‚ç‚¹ä¸­çš„è¡¨å•å€¼æ”¶é›†åˆ°å½“å‰ model ä¸­ name å¯¹åº”çš„ä½ç½®

<PropsTable props={[{ name: 'name', type: 'string', required: true, description: 'å­—æ®µç´¢å¼•' }]} />

### `Form.ItemGroup`

å¸ƒå±€ç»„ä»¶ï¼Œå¯å°†å¤šä¸ª FormItem åˆ†ä¸ºä¸€ç»„ã€‚

```jsx
<Form.ItemGroup label="åˆ†ç»„åç§°" inline labelWidth={50} controlWidth={200}>
  <FormItem component="input" />
  <FormItem component="select" />
</Form.ItemGroup>
```

<PropsTable
  props={[
    { name: 'label', type: 'ReactNode', description: 'åˆ†ç»„çš„æ ‡ç­¾' },
    { name: 'inline', type: 'boolean', description: 'æ˜¯å¦ä½¿ç”¨å†…è”å¸ƒå±€' },
    { name: 'labelWidth', type: 'number | string', description: 'åˆ†ç»„å†… FormItem çš„æ ‡ç­¾å®½åº¦' },
    { name: 'controlWidth', type: 'number | string', description: 'åˆ†ç»„å†… FormItem çš„æ§ä»¶å®½åº¦' },
    { name: 'style', type: 'React.CSSProperties', description: 'å†…è”æ ·å¼' },
    { name: 'className', type: 'string', description: 'className' },
  ]}
/>

### `Form.ItemView`

è¡¨å•é¡¹è§†å›¾ç»„ä»¶ã€‚é€šè¿‡ `Form.ItemView` å¯ä»¥è®©è‡ªå®šä¹‰çš„ç»„ä»¶å’Œæ™®é€š FormItem ä½¿ç”¨ç›¸åŒçš„å¸ƒå±€ã€‚

```jsx
// æ™®é€š FormItem
<FormItem label="æ ‡ç­¾æ ‡ç­¾" component="select" />

// åˆ©ç”¨ Form.ItemView è®©è‡ªå®šä¹‰å†…å®¹ä½¿ç”¨ä¸ FormItem ç›¸åŒçš„å¸ƒå±€
<Form.ItemView label="æ ‡ç­¾æ ‡ç­¾">
  <MyCustomSelect value={...} onChange={...} />
</Form.ItemView>
```

<PropsTable
  props={[
    { name: 'label', type: 'ReactNode', description: 'æ ‡ç­¾' },
    { name: 'help', type: 'boolean', description: 'å¸®åŠ©æ–‡æœ¬' },
    { name: 'tip', type: 'boolean', description: 'æç¤ºä¿¡æ¯' },
    { name: 'asterisk', type: 'boolean', description: 'æ˜¯å¦å±•ç¤ºã€Œ*ã€' },
    { name: 'error', type: 'boolean', description: 'é”™è¯¯ä¿¡æ¯' },
    { name: 'style', type: 'React.CSSProperties', description: 'å†…è”æ ·å¼' },
    { name: 'className', type: 'string', description: 'className' },
  ]}
/>

## contexts & hooks

### `useModel`

è·å–å½“å‰å±‚çº§çš„æ¨¡å‹å¯¹è±¡ã€‚

### `Form.ModelConsumer`

ModelContext çš„ [`Consumer`](https://zh-hans.reactjs.org/docs/context.html#contextconsumer)ï¼Œå¯ç”¨äºè®¢é˜…å½“å‰å±‚çº§çš„ modelã€‚

è¯¥ç»„ä»¶å·²ç»è¢«åŒ…è£¹åœ¨ [observer](https://mobx.js.org/react-integration.html) ä¸­ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ [render prop](https://zh-hans.reactjs.org/docs/render-props.html) ä¸­è¯»å– mobx observable å¯¹è±¡ã€‚

```jsx
<Form.ModelConsumer>
  {(model) => {
    const person = model.getSubModel('person');
    return <span>å§“åï¼š {person.getValue('name')}</span>;
  }}
</Form.ModelConsumer>
```

### `Form.ModelProvider`

{ğŸš€} ä¸»åŠ¨åœ¨ react context ä¸­è®¾ç½®æ¨¡å‹å¯¹è±¡ã€‚

`<Form.ModelProvider value={model}>{children}</Form.ModelProvider>`

### `useFormEnv`

{ğŸš€} è·å–å½“å‰å±‚çº§çš„ç¯å¢ƒå˜é‡ã€‚

### `FormEnvProvider`

{ğŸš€} åœ¨æŒ‡å®šçš„å±‚çº§è¦†ç›–è¡¨å•çš„ç¯å¢ƒå˜é‡ã€‚

`<Form />` æ¸²æŸ“æ—¶ä¼šè‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä¸€èˆ¬ä¸éœ€è¦å•ç‹¬ä½¿ç”¨ `<FormEnvProvider />`ã€‚ ç›®å‰é»˜è®¤æ”¯æŒè®¾ç½® `isPreview`ï¼š

```jsx
<Form>
  <FormItem name="aaa" />
  <FormItem name="bbb" />

  <FormEnvProvider isPreview>
    {/* ccc å’Œ ddd æ€»æ˜¯ä¼šå¤„äºé¢„è§ˆæ€ */}
    <FormItem name="ccc" />
    <FormItem name="ddd" />
  </FormEnvProvider>
</Form>
```

FormEnvProvider æ¥å—ä»»æ„çš„ propsï¼Œè®¾ç½®åå­ç»„ä»¶å¯ä»¥é€šè¿‡ `useFormEnv()` è·å–åˆ°è¿™äº›ç¯å¢ƒå˜é‡ï¼ˆæ³¨æ„ TypeScript ç±»å‹ä¿¡æ¯è¦è¿›è¡Œç›¸åº”çš„æ‹“å±•ï¼‰ã€‚

è®¾ç½® FormEnvProvider æ—¶ï¼Œæ–°çš„ç¯å¢ƒå˜é‡ä¼šä¸ä¸Šå±‚çš„ç¯å¢ƒå˜é‡è¿›è¡Œåˆå¹¶ï¼Œç„¶åä¼ é€’ç»™å­ç»„ä»¶ã€‚

## æ•°ç»„å¸ƒå±€ {ğŸš€}

éœ€è¦é…åˆ `Form.Array` ä½¿ç”¨

:::info @alife/hippo-xform
æ³¨æ„å› ä¸ºåº•å±‚ç»„ä»¶åº“ä¸åŒï¼Œ@alife/hippo-xform æä¾›äº†ä¸åŒçš„ layout å‚æ•°ã€‚è¯¦è§ [hippo-xform](hippo-xform).
:::

### `arrayCard`

{ğŸš€} å¡ç‰‡å¸ƒå±€

:::note
å¡ç‰‡å¸ƒå±€ ä»åœ¨å®Œå–„ä¸­ã€‚
:::

```tsx
interface ArrayCardOptions {
  title?: string;
  showItemCount?: boolean;
  showItemOrder?: boolean;
  style?: React.CSSProperties;
}
```

### `arrayTable`

{ğŸš€} è¡¨æ ¼å¸ƒå±€

:::note
è¡¨æ ¼å¸ƒå±€ ä»åœ¨å®Œå–„ä¸­ã€‚
:::

```tsx
interface ArrayTableOptions {
  defaultColumnWidth?: number;
  operationColumn?: Partial<Column>;
  orderColumn?: Partial<Column>;
  style?: React.CSSProperties;
  className?: string;
}
```

## æ¨¡å‹ä¸å·¥å…·

### `IModel`

IModel ç”¨äºæŠ½è±¡è§†å›¾ä¸­çš„ä¸€ç»„æ§ä»¶ï¼Œå…¶å¯¹åº”çš„æ•°æ®ç±»å‹å¾€å¾€æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–ä¸€ä¸ªæ•°ç»„ã€‚

IModel æ˜¯ä¸€ä¸ª interfaceï¼Œ `FormModel`ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰å’Œ `SubModel`ï¼ˆå­èŠ‚ç‚¹ï¼‰ å®ç°äº†è¯¥ interface.

- `model.getSubModel(name): SubModel` è·å–ä¸€ä¸ªå­æ¨¡å‹
- `model.getField(name): Field` è·å– name å¯¹åº”çš„å­—æ®µå¯¹è±¡
- `model.root: FormModel` æŒ‡å‘æ ¹èŠ‚ç‚¹ FormModel
- `model.path: string[]` ä» FormModel åˆ°å½“å‰ model çš„æ•°æ®è·¯å¾„
- `model.parent: IModel` æŒ‡å‘ä¸Šä¸€çº§çš„ model
- `model.values` æ¨¡å‹ä¸Šçš„æ•°æ®ï¼Œè¿™æ˜¯ä¸€ä¸ª mobx computed å­—æ®µ
- `model.getValue(name, defaultValue)` ä»¥å½“å‰æ¨¡å‹ä¸ºèµ·å§‹è·¯å¾„ï¼Œè¯»å– name å¤„çš„æ•°æ®
- `model.setValue(name, value)` ä»¥å½“å‰æ¨¡å‹ä¸ºèµ·å§‹è·¯å¾„ï¼Œä¿®æ”¹ name å¤„çš„æ•°æ®
- `model.state` æ¨¡å‹çº§åˆ«çš„çŠ¶æ€ï¼Œè¿™æ˜¯ä¸€ä¸ª mobx observable å¯¹è±¡ï¼Œé»˜è®¤ä¸º `{}`ï¼Œä¸€èˆ¬ç”¨æ¥ç®¡ç†ä¸€äº›è¡¨å•çš„ UI çŠ¶æ€ã€‚
- `model.id: string` æ¨¡å‹åœ¨æ‰€å± FormModel å†…çš„å”¯ä¸€ id

### `Field`

Field ç”¨äºæŠ½è±¡è§†å›¾ä¸­çš„å•ä¸ªæ§ä»¶ï¼Œå…¶å¯¹åº”çš„æ•°æ®ç±»å‹å¾€å¾€æ˜¯ç®€å•çš„æ•°å­—æˆ–å­—ç¬¦ä¸²ã€‚

- `field.value` è¯»å–æˆ–è®¾ç½®å­—æ®µçš„å€¼ï¼Œè¿™æ˜¯ä¸€ä¸ª mobx computed å­—æ®µ
- `field.state` å­—æ®µçŠ¶æ€ï¼Œè¿™æ˜¯ä¸€ä¸ª mobx observable å¯¹è±¡ï¼Œé»˜è®¤ä¸º `{}`ã€‚
  - ç›®å‰ï¼Œæˆ‘ä»¬çº¦å®šäº†ä»¥ä¸‹å±æ€§çš„å«ä¹‰ï¼š
    - `field.state.error` è¯¥å­—æ®µä¸Šçš„é”™è¯¯æ¶ˆæ¯ï¼Œå½“ error å­—æ®µæœ‰å€¼æ—¶ï¼Œé¡µé¢ä¸­å°±ä¼šå±•ç¤ºå¯¹åº”çš„å‡ºé”™æç¤º
    - `field.state.validating` æ˜¯å¦æ­£åœ¨æ‰§è¡Œæ ¡éªŒ
    - `field.state.cancelValidation()` å–æ¶ˆä¸Šæ¬¡æ ¡éªŒçš„æ–¹æ³•
- `field.config` å­—æ®µé…ç½®ä¿¡æ¯ï¼Œåæ˜ è¯¥å­—æ®µå¯¹åº”çš„æ§ä»¶æœ€è¿‘ä¸€æ¬¡è¢«æ¸²æŸ“æ—¶ React Element ä¸Šçš„ props
- `field.id: string` å­—æ®µåœ¨æ‰€å±è¡¨å•å†…çš„å”¯ä¸€ id
- `field.isMounted: boolean` å¯¹åº”çš„æ§ä»¶æ˜¯å¦æ¸²æŸ“åœ¨è§†å›¾ä¸­
- `field.path: string[]` ä» FormModel åˆ°è¯¥å­—æ®µçš„å®Œæ•´è·¯å¾„
- `field.parent: IModel` æŒ‡å‘ä¸Šä¸€çº§çš„ model
- `field.getFork(forkName): Field` è·å– field forkï¼Œè¯¦è§ [ç›¸åŒæ•°æ®ç´¢å¼•å¯¹åº”å¤šä¸ªè§†å›¾](advanced#ç›¸åŒæ•°æ®ç´¢å¼•å¯¹åº”å¤šä¸ªè§†å›¾)
- `field.validate(trigger): Promise<string | undefined>` æ‰§è¡ŒæŒ‡å®šå­—æ®µä¸Šçš„æ ¡éªŒï¼Œè¿”å› `Promise<string>` è¡¨ç¤ºæŠ¥é”™ä¿¡æ¯ï¼›trigger ç”¨äºæŒ‡å®šæ‰€è¦æ ¡éªŒè§¦å‘çš„æ¥æºç±»å‹ï¼Œé»˜è®¤ä¸º `'*'`ã€‚
- `field.handleBlur()` å¤„ç†æ§ä»¶ blur äº‹ä»¶çš„å›è°ƒå‡½æ•°
- `field.handleChange(nextValue: any)` å¤„ç† value ä¿®æ”¹çš„å›è°ƒå‡½æ•°

### `modelUtils.clearError`

`modelUtils.clearError(model : IModel): void`

mobx action. æ¸…é™¤ model ä¸Šæ‰€æœ‰çš„é”™è¯¯ä¿¡æ¯

### `modelUtils.validateAll`

```
modelUtils.validateAll(
  model: IModel,
  trigger?: '*' | 'blur' | 'change'
): Promise<{ hasError: boolean, errors: any }>
```

mobx action. æ‰§è¡Œ model ä¸Šæ‰€æœ‰çš„æ ¡éªŒï¼Œå¹¶è¿”å›ä¸€ä¸ª Promise è¡¨ç¤ºæ‰€æœ‰çš„æŠ¥é”™ä¿¡æ¯ï¼›trigger ç”¨äºæŒ‡å®šæ‰€è¦æ‰§è¡Œçš„ validateï¼Œé»˜è®¤ä¸º `'*'`ã€‚

### `modelUtils.submit`

```
modelUtils.submit(
  model: IModel,
  options?: {
    valueFilter?: 'mounted' | 'all',
    onError?: Function,
    onSubmit?: Function,
  }
): void
```

mobx action. ä¸»åŠ¨è§¦å‘ [`Form.Submit`](#formsubmit) è¢«ç‚¹å‡»çš„æµç¨‹ã€‚ options.valueFilter å¯ä»¥æ§åˆ¶ submit å›å¡«å“ªäº›å€¼ã€‚

### `modelUtils.reset`

```
modelUtils.reset(
  model: IModel,
  options?: {
    onReset?: Function,
  }
): void
```

mobx action. ä¸»åŠ¨è§¦å‘ [`Form.Reset`](#formreset) è¢«ç‚¹å‡»çš„æµç¨‹ã€‚

### `createFormItem`

{ğŸš€} `createFormItem(options: FormItemCreationOptions): FormItem`

åˆ›å»ºè¡¨å•é¡¹ç»„ä»¶ã€‚

**ç”¨æ³•ç¤ºä¾‹**

```jsx
// è‡ªå®šä¹‰ç»„ä»¶
const CitySelect = ({ value, onChange, onBlur }) => {
  return (
    <div>
      <p>è¯·é€‰æ‹©å±…ä½åŸå¸‚ï¼š</p>
      <Select value={value} onChange={onChange} onBlur={onBlur} dataSource={CITY_LIST} />
    </div>
  );
};

// ä½¿ç”¨ createFormItem åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ FormItem
const CustomFormItem = createFormItem({
  name: 'myCitySelect',
  component: CitySelect,
  isEmpty(value) {
    return value == null;
  },
  fallbackValue: null,
});

// åƒæ™®é€š FormItem ä¸€æ ·ä½¿ç”¨ CustomFormItem
<Form>
  <FormItem component="input" label="å§“å" name="name" validate={isValidateName} />
  <CustomFormItem label="åŸå¸‚" name="city" validate={isValidCity} />
</Form>;
```

**ç±»å‹ä¿¡æ¯ï¼š**

```tsx
export interface FormItemCreationOptions {
  /** åç§° */
  name: string;

  /** æ§ä»¶å¯¹åº”çš„ React ç»„ä»¶ï¼Œä¾‹å¦‚ `<FormItem component="select" />` å¯¹åº” `Select` ç»„ä»¶. */
  component?: React.ComponentType<FormItemComponentProps>;

  /** æ§ä»¶æ¸²æŸ“æ–¹æ³•ï¼Œä¸ component å‚æ•°äºŒé€‰ä¸€ï¼Œä¼˜å…ˆçº§é«˜äº component */
  render?(arg: FormItemComponentProps): React.ReactElement;

  /** ç»„ä»¶å€¼çš„å±æ€§åç§°ï¼Œé»˜è®¤ä¸º `'value'` */
  valuePropName?: string;

  /** ç»„ä»¶çŠ¶æ€å€¼çš„å±æ€§åç§°ï¼Œé»˜è®¤ä¸º `'status'` */
  statusPropName?: string;

  /** é¢„è§ˆæ€ä¸‹ç»„ä»¶çš„æ¸²æŸ“æ–¹æ³•ã€‚å¦‚æœä¸è®¾ç½®è¯¥æ–¹æ³•ï¼Œé¢„è§ˆæ€ä¸‹å°†ä½¿ç”¨ render/component ä½œä¸ºåå¤‡æ–¹æ¡ˆ. */
  renderPreview?(props: FormItemComponentProps): React.ReactNode;

  /** å½“æ¨¡å‹ä¸­çš„å­—æ®µå€¼ä¸ºç©ºï¼ˆundefinedï¼‰æ—¶ï¼Œæ¸²æŸ“æ§ä»¶æ‰€ä½¿ç”¨çš„å€¼ */
  fallbackValue: any;

  /** ç»„ä»¶ç±»å‹é»˜è®¤çš„ç©ºå€¼åˆ¤æ–­æ–¹æ³• */
  isEmpty(value: any): boolean;
}
```

### `FormItem.register`

{ğŸš€} `FormItem.register(options: FormItemCreationOptions): void`

å‘ FormItem ä¸­æ³¨å†Œæ–°çš„ç»„ä»¶ã€‚ options å‚æ•°ç±»å‹è§ä¸Šæ–¹ã€‚ `options.name` ä¼šä¸å·²æœ‰çš„ç»„ä»¶å…±äº«ä¸€ä¸ªå‘½åç©ºé—´ï¼Œæ³¨æ„é¿å…å†²çªã€‚

```jsx
// è‡ªå®šä¹‰ç»„ä»¶
const CitySelect = ({ value, onChange, onBlur }) => {
  return (
    <div>
      <p>è¯·é€‰æ‹©å±…ä½åŸå¸‚ï¼š</p>
      <Select value={value} onChange={onChange} onBlur={onBlur} dataSource={CITY_LIST} />
    </div>
  );
};

// æ³¨å†Œ
FormItem.register({
  name: 'myCitySelect',
  component: CitySelect,
  isEmpty(value) {
    return value == null;
  },
  fallbackValue: null,
});

// ä½¿ç”¨
<FormItem component="myCitySelect" name="city" label="åŸå¸‚" />;
```

### `createAsyncValue`

`createAsyncValue<T>(fetcher: () => Promise<T>, initValue?: T): AsyncValue<T>`

åŸºäº `fetcher` åˆ›å»ºå®šä¹‰ä¸€ä¸ª AsyncValueï¼Œç”¨äºå£°æ˜å¼åœ°å®šä¹‰å¼‚æ­¥æ•°æ®æºã€‚

å½“ `asyncValue.*` (\* è¡¨ç¤º value/status/error) è¢«è®¢é˜…æ—¶ï¼Œ fetcher å°†è¢«é¦–æ¬¡è°ƒç”¨ï¼Œ å…¶è¿”å›ç»“æœå°†ä½œä¸º `asyncValue.current` çš„å€¼ã€‚

è°ƒç”¨ fetcher çš„è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œä¾èµ–æ”¶é›†ï¼Œæ¯å½“è¿™äº›ä¾èµ–çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œfetcher éƒ½ä¼šè¢«é‡æ–°è§¦å‘ã€‚

<details>

<summary>å…·ä½“è§„åˆ™ï¼š</summary>

1. æ¯æ¬¡ fetcher è¢«è°ƒç”¨æ—¶ï¼Œ status å°±ä¼šå˜ä¸º loadingï¼Œå¹¶ç­‰å¾… fetcher è¿”å›çš„ Promise resolve æˆ– rejectï¼›
2. å½“ fetcher è¿”å›çš„ Promise resolve æ—¶ï¼Œ status å˜ä¸º readyï¼ŒåŒæ—¶ current å­—æ®µå˜ä¸ºæœ€æ–°çš„å€¼ï¼›
3. å½“ fetcher è¿”å›çš„ Promise reject æ—¶ï¼Œ status å˜ä¸º errorï¼ŒåŒæ—¶ error å­—æ®µè®°å½•æœ¬æ¬¡é”™è¯¯ï¼›
4. å½“ fetcher è¿”å›çš„ Promise ä»å¤„äº pending çŠ¶æ€æ—¶ï¼Œè‹¥ fetcher å†æ¬¡è¢«è°ƒç”¨ï¼Œå·²æœ‰çš„ promise å°†è¢«å¿½ç•¥ï¼Œå°†ä¼šå›åˆ° 1.

</details>

### `AsyncValue`

`AsyncValue` æ˜¯ä¸€ä¸ª interfaceï¼Œè¯¥ç±»å‹çš„å¯¹è±¡é€šè¿‡ [createAsyncValue](#createasyncvalue) åˆ›å»ºã€‚

```tsx
export interface AsyncValue<T> {
  /** çŠ¶æ€ï¼Œå¯ä¸ºä»¥ä¸‹å€¼ 'loading' | 'ready' | 'error' */
  readonly status: AsyncValueStatus;

  /** å½“å‰å€¼ */
  readonly current: T;

  /** é”™è¯¯ */
  readonly error?: any;

  /** é”€æ¯ AsyncValue */
  dispose(): void;

  /** é‡æ–°è§¦å‘ fetcher */
  refresh(): void;
}
```

#### `isAsyncValue`

`isAsyncValue(obj: object): obj is AsyncValue<any>`

åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸º AsyncValue.
